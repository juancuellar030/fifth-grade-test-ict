<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICT Quiz for 5th Grade</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Monitor = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" strokeWidth="2"/>
                <line x1="8" y1="21" x2="16" y2="21" strokeWidth="2"/>
                <line x1="12" y1="17" x2="12" y2="21" strokeWidth="2"/>
            </svg>
        );

        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                <line x1="12" y1="8" x2="12" y2="12" strokeWidth="2"/>
                <line x1="12" y1="16" x2="12.01" y2="16" strokeWidth="2"/>
            </svg>
        );

        const ICTQuiz = () => {
            const [studentName, setStudentName] = useState('');
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [hasStarted, setHasStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [isFullscreen, setIsFullscreen] = useState(false);
            const [showWarning, setShowWarning] = useState(false);
            const [isCompleted, setIsCompleted] = useState(false);
            const [completedStudents, setCompletedStudents] = useState({});
            const [showNameError, setShowNameError] = useState(false);
            const [questionTransition, setQuestionTransition] = useState('enter');
            const [draggedItem, setDraggedItem] = useState(null);
            const [dropZones, setDropZones] = useState({});
            const [startTime, setStartTime] = useState(null);
            const [fullscreenExitCount, setFullscreenExitCount] = useState(0);
            const [dataSubmitted, setDataSubmitted] = useState(false);
            const inputRef = useRef(null);

            const studentList = [
                "Isabella Arce Rodriguez", "Valentina Arias Guevara", "Maria Paz Bermeo Montealegre",
                "Zoe Lylen Casta√±eda Romero", "Gabriel Esteban Cuellar Salas", "Dilan Camilo Cumaco Pastrana",
                "Mart√≠n Fern√°ndez Lucuara", "Derek Santiago Fierro Lopez", "Sim√≥n Gonzalez Chavarro",
                "Ger√≥nimo Jimenez Bocanegra", "Samuel Jos√© Maj√© Marroqu√≠n", "Mart√≠n Medina Ortiz",
                "Karen Sofia Mosquera Baylon", "Mar√≠a Del Mar Mosquera Garz√≥n", "Santiago Motta Santofimio",
                "Ana Lucia Murcia Guebely", "Antonella Murcia Oliveros", "Emmanuel Murcia Trujillo",
                "Luciana Quesada Parra", "Maria Paz Quesada Rodriguez", "Miguel √Ångel Ruiz Varon",
                "Luzyana Suarez Solorzano", "Santiago Tob√≥n Castro", "Sarita Vargas Carvajal",
                "Luciana Sofia Vargas Sanchez", "Julieta Alarcon Cabrera", "Emmanuel Barrero Sandoval",
                "Catalina Barreto Rivera", "Khalid Bedoya Sanabria", "Daniela Beron Farfan",
                "Ana Lucia Buend√≠a Losada", "Jacobo Carvajal Jimenez", "Juliana Margarita Castrillon Ramos",
                "Isabel Cristina Cuellar Romero", "Emiliano Diaz Rojas", "Gabriela Echeverry Trujillo",
                "Sara Isabella Gaitan Arango", "Fabio Hernandez Galindo", "Juanita Milagros Lopez Alarcon",
                "Karla Medina Cuenca", "Maria Paz Mora Caicedo", "Emiliano Ortiz Ortiz",
                "Pablo Alejandro Oviedo Barrero", "Maria Lucia Perdomo Ramirez", "Zamuhel Ramirez Castro",
                "Sara Juliana Riscanevo Lopera", "Maria Fernanda Rojas Castro", "Santiago Trujillo Gonzalez",
                "Juan Diego Valderrama Rodriguez", "Sarah Michelle Audor Gutierrez", "Santiago Chavarro Fern√°ndez",
                "Taliana Andrea Chavarro Sanabria", "Ariadna Estupi√±an Borrero", "Martin Eduardo Fierro Cordoba",
                "Danna Gabriela Giraldo Leiva", "Juan Ricardo Guevara Calderon", "Salomon Hoyos Castillo",
                "Jhoan Sebastian Lozano Moscoso", "Sebastian Martinez Dussan", "Sofia Mayorca Gonzalez",
                "Samantha Medina Figueroa", "Maria Lucia Melo Camacho", "Sara Luciana Obregon Agudelo",
                "Sara Orozco Escobar", "Santiago Osorio Benavides", "Angie Luciana Perez Trujillo",
                "Santiago Polania Perdomo", "Felipe Ramos Vargas", "Jorge Mario Rojas Alvarez",
                "Sofia Salazar Casta√±eda", "Hern√°n Gabriel Sierra Suarez", "Maria Victoria Vidal Prieto",
                "Juan Andres Vieda Diaz", "Juan Diego Albarrac√≠n Mart√≠nez", "Emiliano Andrade Perez",
                "Moises Burgos Arevalo", "Jeronimo Calder√≥n Morales", "Mart√≠n Caquimbo De Castro",
                "Salome Castro Hurtado", "Ashly Dayanna Cumaco Alonso", "Dylan Santiago Gomez Reyes",
                "Salome Gutierrez Acosta", "Jesus Manuel Gutierrez Vargas", "Isabela Huepe Quintero",
                "Juan Esteban Madrid Guevara", "Jeronimo Mora Araujo", "Silvana Moreno Pastrana",
                "Luciana Ni√±o Rojas", "Emmanuel Jos√© Ortiz Urrego", "Sara Sofia Oviedo Cajiao",
                "Daniel Leonardo Perdomo Ochoa", "Juan Matias Rodriguez Calderon", "Maria Jose Rojas Castro",
                "Gabriela Sarmiento-Perez Trujillo", "Juan Felipe Tamayo Casta√±eda", "Luciana Andrea Tellez Aviles",
                "Hanna Isabella Valenzuela Paredes"
            ];

            const questions = [
                {
                    id: 1,
                    type: 'multiple-choice-group',
                    question: 'Answer each question by selecting the correct option:',
                    questions: [
                        { text: 'What does ICT help us do?', options: ['Share and find information', 'Paint pictures', 'Ride bicycles', 'Cook food'], correct: 0 },
                        { text: 'What do we call programs that help us play games or do homework on a computer?', options: ['Hardware', 'Software', 'Network', 'Input'], correct: 1 },
                        { text: 'What is input in ICT?', options: ['Sending information to a device, like typing on a keyboard', 'The computer thinking', 'The screen showing information', 'Printing a paper'], correct: 0 }
                    ]
                },
                {
                    id: 2,
                    type: 'drag-drop',
                    question: 'Drag each item to the correct category:',
                    items: ['Headphones', 'Google Chrome', 'Wi-Fi', 'Tablet'],
                    categories: ['Hardware', 'Software', 'Network', 'Processing Device'],
                    correctAnswers: { 'Hardware': 'Headphones', 'Software': 'Google Chrome', 'Network': 'Wi-Fi', 'Processing Device': 'Tablet' }
                },
                {
                    id: 3,
                    type: 'drag-drop-images',
                    question: 'Drag each device to the correct group:',
                    items: [
                        { name: 'Keyboard', type: 'input', icon: '‚å®Ô∏è' }, { name: 'Monitor', type: 'output', icon: 'üñ•Ô∏è' },
                        { name: 'Mouse', type: 'input', icon: 'üñ±Ô∏è' }, { name: 'Printer', type: 'output', icon: 'üñ®Ô∏è' },
                        { name: 'Microphone', type: 'input', icon: 'üé§' }, { name: 'Speaker', type: 'output', icon: 'üîä' }
                    ],
                    categories: ['Input Devices', 'Output Devices'],
                    correctAnswers: { 'Input Devices': ['Keyboard', 'Mouse', 'Microphone'], 'Output Devices': ['Monitor', 'Printer', 'Speaker'] }
                },
                {
                    id: 4,
                    type: 'true-false-group',
                    question: 'Read each statement and select True or False:',
                    statements: [
                        { text: 'Software is something you can physically touch.', correct: 1 },
                        { text: 'Smartphones and tablets are examples of ICT devices.', correct: 0 },
                        { text: 'Sending emails is an example of using ICT in daily life.', correct: 0 }
                    ]
                },
                {
                    id: 5,
                    type: 'fill-group',
                    question: 'Drag the correct word from the box to fill in each blank:',
                    wordBank: ['networks', 'internet', 'software', 'processing', 'communication'],
                    statements: [
                        { text: 'Bluetooth and Wi-Fi are examples of wireless _______.', answer: 'networks' },
                        { text: 'The _______ connects multiple devices to share information.', answer: 'internet' },
                        { text: 'Programs and apps are examples of _______.', answer: 'software' },
                        { text: 'When a computer thinks and works on information, this is called _______.', answer: 'processing' }
                    ]
                }
            ];
            
            const gradingScale = {
                0: 20, 1: 22, 2: 23, 3: 25, 4: 27, 5: 28, 6: 30, 7: 32, 8: 33, 9: 35,
                10: 36, 11: 38, 12: 39, 13: 40, 14: 42, 15: 43, 16: 45, 17: 46, 18: 47, 19: 49, 20: 50
            };

            const getGradeFromScore = (score) => gradingScale[score] !== undefined ? gradingScale[score] : 20;
            const filteredStudents = studentList.filter(name => name.toLowerCase().includes(studentName.toLowerCase()));

            // Submit data when quiz is completed (FIXED - moved outside conditional render)
            useEffect(() => {
                if (isCompleted && !dataSubmitted) {
                    const points = calculatePoints();
                    const grade = getGradeFromScore(points);
                    const endTime = new Date().toISOString();
                    
                    const results = {
                        studentName: studentName,
                        startTime: startTime,
                        endTime: endTime,
                        score: points,
                        grade: grade,
                        fullscreenExits: fullscreenExitCount
                    };
                    
                    submitResultsToGoogleSheet(results);
                    setDataSubmitted(true);
                }
            }, [isCompleted]);

            useEffect(() => {
                const handleFullscreenChange = () => {
                    const isCurrentlyFullscreen = !!document.fullscreenElement;
                    setIsFullscreen(isCurrentlyFullscreen);
                    if (!isCurrentlyFullscreen && hasStarted && !isCompleted) {
                        setShowWarning(true);
                        setFullscreenExitCount(prevCount => prevCount + 1);
                    }
                };

                const handleVisibilityChange = () => {
                    if (document.hidden && hasStarted && !isCompleted) {
                        setShowWarning(true);
                        setFullscreenExitCount(prevCount => prevCount + 1);
                    }
                };

                document.addEventListener('fullscreenchange', handleFullscreenChange);
                document.addEventListener('visibilitychange', handleVisibilityChange);
                return () => {
                    document.removeEventListener('fullscreenchange', handleFullscreenChange);
                    document.removeEventListener('visibilitychange', handleVisibilityChange);
                };
            }, [hasStarted, isCompleted]);
            
            useEffect(() => {
                const currentQ = questions[currentQuestion];
                if (currentQ && (currentQ.type === 'drag-drop' || currentQ.type === 'drag-drop-images')) {
                    setDropZones(answers[currentQuestion] || {});
                }
            }, [currentQuestion]);

            useEffect(() => {
                const handleClickOutside = (event) => {
                    if (inputRef.current && !inputRef.current.contains(event.target)) {
                        setShowSuggestions(false);
                    }
                };
                document.addEventListener('mousedown', handleClickOutside);
                return () => document.removeEventListener('mousedown', handleClickOutside);
            }, []);

            const submitResultsToGoogleSheet = async (data) => {
                const webAppUrl = 'https://script.google.com/macros/s/AKfycbw_tZqRkAFsymp92fY4dYHd7xAQ27KCj2JuT0FkdzktvR4_n79-QwS5VRpGNs896eEQ/exec';

                try {
                    const response = await fetch(webAppUrl, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(data)
                    });
                    console.log('Data sent to Google Sheets:', data);
                } catch (error) {
                    console.error('Error sending data to Google Sheets:', error);
                }
            };

            const enterFullscreen = () => {
                if (document.documentElement.requestFullscreen) {
                    document.documentElement.requestFullscreen().then(() => setShowWarning(false));
                }
            };

            const handleStartQuiz = () => {
                if (!studentName.trim() || !studentList.includes(studentName)) {
                    setShowNameError(true);
                    return;
                }
                if (completedStudents[studentName]) {
                    alert('You have already completed this quiz! You can only take it once.');
                    return;
                }
                setStartTime(new Date().toISOString());
                setHasStarted(true);
                enterFullscreen();
            };
            
            const handleAnswer = (answer) => setAnswers({ ...answers, [currentQuestion]: answer });
            const handleDragStart = (e, item) => {
                setDraggedItem(item);
                e.dataTransfer.effectAllowed = 'move';
                e.dataTransfer.setData('text/plain', item);
            };
            const handleDragOver = (e) => {
                e.preventDefault();
                e.dataTransfer.dropEffect = 'move';
            };

            const handleDrop = (e, category) => {
                e.preventDefault();
                const item = draggedItem || e.dataTransfer.getData('text/plain');
                const currentQ = questions[currentQuestion];
                if (item) {
                    let newDropZones = { ...(answers[currentQuestion] || {}) };
                    if (currentQ.type === 'drag-drop') {
                        Object.keys(newDropZones).forEach(key => {
                            if (newDropZones[key] === item) delete newDropZones[key];
                        });
                        newDropZones[category] = item;
                    } else if (currentQ.type === 'drag-drop-images') {
                        Object.keys(newDropZones).forEach(key => {
                            if (Array.isArray(newDropZones[key])) {
                                newDropZones[key] = newDropZones[key].filter(i => i !== item);
                            }
                        });
                        if (!newDropZones[category]) newDropZones[category] = [];
                        if (!newDropZones[category].includes(item)) newDropZones[category].push(item);
                    }
                    setDropZones(newDropZones);
                    setAnswers({ ...answers, [currentQuestion]: newDropZones });
                    setDraggedItem(null);
                }
            };

            const getAvailableItems = () => {
                const currentQ = questions[currentQuestion];
                const currentAnswers = answers[currentQuestion] || {};
                if (currentQ.type === 'drag-drop') {
                    const placedItems = Object.values(currentAnswers);
                    return currentQ.items.filter(item => !placedItems.includes(item));
                } else if (currentQ.type === 'drag-drop-images') {
                    const placedItems = Object.values(currentAnswers).flat();
                    return currentQ.items.filter(item => !placedItems.includes(item.name));
                } else if (currentQ.type === 'fill-group') {
                    const usedWords = Object.values(currentAnswers);
                    return currentQ.wordBank.filter(word => !usedWords.includes(word));
                }
                return [];
            };

            const handleNext = () => {
                setQuestionTransition('exit');
                setTimeout(() => {
                    if (currentQuestion < questions.length - 1) {
                        setCurrentQuestion(prev => prev + 1);
                        setQuestionTransition('enter');
                        setDraggedItem(null);
                    } else {
                        setIsCompleted(true);
                        setCompletedStudents({ ...completedStudents, [studentName]: true });
                        if (document.exitFullscreen) document.exitFullscreen();
                    }
                }, 300);
            };

            const handleBack = () => {
                if (currentQuestion > 0) {
                    setQuestionTransition('exit');
                    setTimeout(() => {
                        setCurrentQuestion(prev => prev - 1);
                        setQuestionTransition('enter');
                        setDraggedItem(null);
                    }, 300);
                }
            };

            const calculatePoints = () => {
                let points = 0;
                questions.forEach((q, index) => {
                    const userAnswers = answers[index] || {};
                    if (q.type === 'multiple-choice-group') {
                        q.questions.forEach((subQ, qIndex) => {
                            if (userAnswers[qIndex] === subQ.correct) points++;
                        });
                    } else if (q.type === 'drag-drop') {
                        Object.keys(q.correctAnswers).forEach(category => {
                            if (userAnswers[category] === q.correctAnswers[category]) points++;
                        });
                    } else if (q.type === 'drag-drop-images') {
                        q.items.forEach(item => {
                            const correctCat = Object.keys(q.correctAnswers).find(cat => 
                                q.correctAnswers[cat].includes(item.name)
                            );
                            const userCat = Object.keys(userAnswers).find(cat => 
                                (userAnswers[cat] || []).includes(item.name)
                            );
                            if (correctCat === userCat) points++;
                        });
                    } else if (q.type === 'true-false-group') {
                        q.statements.forEach((stmt, stmtIndex) => {
                            if (userAnswers[stmtIndex] === stmt.correct) points++;
                        });
                    } else if (q.type === 'fill-group') {
                        q.statements.forEach((stmt, stmtIndex) => {
                            if (userAnswers[stmtIndex]?.toLowerCase().trim() === stmt.answer.toLowerCase()) points++;
                        });
                    }
                });
                return points;
            };

            const AnimatedBackground = () => (
                <div className="fixed inset-0 overflow-hidden pointer-events-none">
                    <style>{`
                        @keyframes float1 {
                            0%, 100% { transform: translate(0, 0) rotate(0deg); }
                            33% { transform: translate(30px, -30px) rotate(120deg); }
                            66% { transform: translate(-20px, 20px) rotate(240deg); }
                        }
                        @keyframes float2 {
                            0%, 100% { transform: translate(0, 0) rotate(0deg); }
                            33% { transform: translate(-40px, 40px) rotate(-120deg); }
                            66% { transform: translate(20px, -20px) rotate(-240deg); }
                        }
                        @keyframes float3 {
                            0%, 100% { transform: translate(0, 0) scale(1); }
                            50% { transform: translate(15px, 15px) scale(1.1); }
                        }
                        @keyframes slideInRight {
                            from { opacity: 0; transform: translateX(100px); }
                            to { opacity: 1; transform: translateX(0); }
                        }
                        @keyframes slideOutLeft {
                            from { opacity: 1; transform: translateX(0); }
                            to { opacity: 0; transform: translateX(-100px); }
                        }
                        @keyframes fadeIn {
                            from { opacity: 0; transform: scale(0.95); }
                            to { opacity: 1; transform: scale(1); }
                        }
                        @keyframes pulse {
                            0%, 100% { transform: scale(1); }
                            50% { transform: scale(1.05); }
                        }
                        @keyframes shake {
                            0%, 100% { transform: translateX(0); }
                            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
                            20%, 40%, 60%, 80% { transform: translateX(10px); }
                        }
                        .float-1 { animation: float1 20s infinite ease-in-out; }
                        .float-2 { animation: float2 25s infinite ease-in-out; }
                        .float-3 { animation: float3 15s infinite ease-in-out; }
                        .slide-in { animation: slideInRight 0.4s ease-out; }
                        .slide-out { animation: slideOutLeft 0.3s ease-in; }
                        .fade-in { animation: fadeIn 0.3s ease-out; }
                        .pulse { animation: pulse 2s infinite; }
                        .shake { animation: shake 0.5s; }
                    `}</style>
                    <div className="float-1 absolute top-20 left-10 opacity-20">
                        <Monitor className="w-16 h-16 text-blue-400" />
                    </div>
                    <div className="float-2 absolute top-40 right-20 opacity-20">
                        <div className="w-12 h-12 border-4 border-purple-400 rounded-lg"></div>
                    </div>
                    <div className="float-3 absolute bottom-32 left-1/4 opacity-20">
                        <div className="w-8 h-8 bg-pink-400 rounded-full"></div>
                    </div>
                    <div className="float-1 absolute top-1/3 right-1/4 opacity-20">
                        <div className="w-10 h-10 border-4 border-indigo-400 rounded-full"></div>
                    </div>
                    <div className="float-2 absolute bottom-20 right-32 opacity-20">
                        <div className="w-14 h-14 border-4 border-blue-400 rotate-45"></div>
                    </div>
                    <div className="float-3 absolute top-1/2 left-16 opacity-20">
                        <svg width="40" height="40" viewBox="0 0 40 40">
                            <path d="M20 5 L35 35 L5 35 Z" fill="none" stroke="#a78bfa" strokeWidth="3"/>
                        </svg>
                    </div>
                </div>
            );
            
            if (!hasStarted && !isCompleted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                        <AnimatedBackground/>
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative z-10 fade-in">
                            <div className="text-center">
                                <div className="text-6xl mb-4">üéâ</div>
                                <h2 className="text-4xl font-bold text-gray-800 mb-4">Quiz Completed!</h2>
                                <p className="text-xl text-gray-700 mb-2">Great job, {studentName}!</p>
                                <div className="bg-blue-50 rounded-lg p-6 my-6 text-center">
                                    <p className="text-2xl font-bold text-blue-600 mb-2">
                                        Your Score: {points} / {totalPoints}
                                    </p>
                                    <p className="text-3xl font-bold text-green-600 mb-3">
                                        Your Grade: {grade.toFixed(1)}
                                    </p>
                                    <p className="text-xl text-gray-700">{percentage}%</p>
                                </div>
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                                    <p className="text-gray-700">
                                        {percentage >= 80 ? 'üåü Excellent work! You have a great understanding of ICT!' :
                                         percentage >= 60 ? 'üëç Good job! Keep learning about ICT!' :
                                         'üí™ Keep studying! You can do better next time!'}
                                    </p>
                                </div>
                                <p className="text-gray-600">
                                    Thank you for taking the ICT quiz. You've completed this test and cannot retake it.
                                </p>
                            </div>
                        </div>
                    </div>
                );
            }

            const currentQ = questions[currentQuestion];
            const isAnswered = currentQ.type === 'multiple-choice-group'
                ? Object.keys(answers[currentQuestion] || {}).length === currentQ.questions.length
                : currentQ.type === 'drag-drop'
                ? Object.keys(answers[currentQuestion] || {}).length === currentQ.categories.length
                : currentQ.type === 'drag-drop-images'
                ? Object.values(answers[currentQuestion] || {}).flat().length === currentQ.items.length
                : currentQ.type === 'true-false-group'
                ? Object.keys(answers[currentQuestion] || {}).length === currentQ.statements.length
                : currentQ.type === 'fill-group'
                ? Object.keys(answers[currentQuestion] || {}).length === currentQ.statements.length
                : answers[currentQuestion] !== undefined;

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                    <AnimatedBackground />
                    {showWarning && (
                        <div className="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center fade-in shake">
                                <div className="mb-6">
                                    <div className="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 pulse">
                                        <AlertCircle className="w-12 h-12 text-red-600" />
                                    </div>
                                    <h2 className="text-3xl font-bold text-gray-800 mb-3">‚ö†Ô∏è Warning!</h2>
                                    <p className="text-lg text-gray-700 mb-2">
                                        You have exited fullscreen mode or switched tabs.
                                    </p>
                                    <p className="text-md text-gray-600">
                                        Please return to fullscreen mode to continue the quiz.
                                    </p>
                                </div>
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 text-left">
                                    <p className="text-sm text-gray-700">
                                        <strong>Remember:</strong> You must stay in fullscreen mode and on this tab during the entire quiz.
                                    </p>
                                </div>
                                <button
                                    onClick={enterFullscreen}
                                    className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg hover:scale-105 transform"
                                >
                                    Return to Fullscreen
                                </button>
                            </div>
                        </div>
                    )}
                    <div className={`bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative z-10 ${questionTransition === 'enter' ? 'slide-in' : questionTransition === 'exit' ? 'slide-out' : ''} ${showWarning ? 'blur-sm' : ''}`}>
                        <div className="mb-6">
                            <div className="flex justify-between items-center mb-4">
                                <span className="text-sm font-semibold text-gray-500">
                                    Question {currentQuestion + 1} of {questions.length}
                                </span>
                                <span className="text-sm font-semibold text-blue-600">{studentName}</span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div
                                    className="bg-blue-600 h-2 rounded-full transition-all duration-500"
                                    style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}
                                ></div>
                            </div>
                        </div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">{currentQ.question}</h2>

                        {currentQ.type === 'multiple-choice-group' && (
                            <div className="mb-6 space-y-4">
                                {currentQ.questions.map((q, qIndex) => {
                                    const currentAnswers = answers[currentQuestion] || {};
                                    return (
                                        <div key={qIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                                            <p className="text-gray-800 font-medium mb-3">{qIndex + 1}. {q.text}</p>
                                            <div className="space-y-2">
                                                {q.options.map((option, optIndex) => (
                                                    <button
                                                        key={optIndex}
                                                        onClick={() => {
                                                            const newAnswers = { ...currentAnswers, [qIndex]: optIndex };
                                                            handleAnswer(newAnswers);
                                                        }}
                                                        className={`w-full p-3 text-left rounded-lg border-2 transition-all ${
                                                            currentAnswers[qIndex] === optIndex
                                                                ? 'border-blue-600 bg-blue-50 font-semibold transform scale-105'
                                                                : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100'
                                                        }`}
                                                    >
                                                        {option}
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {currentQ.type === 'true-false-group' && (
                            <div className="mb-6 space-y-4">
                                {currentQ.statements.map((statement, stmtIndex) => {
                                    const currentAnswers = answers[currentQuestion] || {};
                                    return (
                                        <div key={stmtIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                                            <p className="text-gray-800 font-medium mb-3">{stmtIndex + 1}. {statement.text}</p>
                                            <div className="flex gap-3">
                                                <button
                                                    onClick={() => {
                                                        const newAnswers = { ...currentAnswers, [stmtIndex]: 0 };
                                                        handleAnswer(newAnswers);
                                                    }}
                                                    className={`flex-1 p-3 rounded-lg border-2 transition-all ${
                                                        currentAnswers[stmtIndex] === 0
                                                            ? 'border-blue-600 bg-blue-50 font-semibold'
                                                            : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100'
                                                    }`}
                                                >
                                                    True
                                                </button>
                                                <button
                                                    onClick={() => {
                                                        const newAnswers = { ...currentAnswers, [stmtIndex]: 1 };
                                                        handleAnswer(newAnswers);
                                                    }}
                                                    className={`flex-1 p-3 rounded-lg border-2 transition-all ${
                                                        currentAnswers[stmtIndex] === 1
                                                            ? 'border-blue-600 bg-blue-50 font-semibold'
                                                            : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100'
                                                    }`}
                                                >
                                                    False
                                                </button>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {currentQ.type === 'fill-group' && (
                            <div className="mb-6">
                                <div className="mb-6">
                                    <p className="text-sm font-semibold text-gray-600 mb-3">üì¶ Word Bank - Drag words to fill the blanks:</p>
                                    <div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">
                                        {getAvailableItems().length === 0 ? (
                                            <p className="text-gray-400 text-sm italic w-full text-center">All words used!</p>
                                        ) : (
                                            getAvailableItems().map((word) => (
                                                <div
                                                    key={word}
                                                    draggable
                                                    onDragStart={(e) => handleDragStart(e, word)}
                                                    className="px-4 py-2 bg-green-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-green-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105 font-semibold"
                                                >
                                                    {word}
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>
                                <div className="space-y-4">
                                    {currentQ.statements.map((statement, stmtIndex) => {
                                        const currentAnswers = answers[currentQuestion] || {};
                                        const parts = statement.text.split('_______');
                                        return (
                                            <div key={stmtIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200">
                                                <div className="flex items-center flex-wrap gap-2">
                                                    <span className="font-semibold text-gray-700">{stmtIndex + 1}.</span>
                                                    <span className="text-gray-800">{parts[0]}</span>
                                                    <div
                                                        onDragOver={handleDragOver}
                                                        onDrop={(e) => {
                                                            e.preventDefault();
                                                            const word = draggedItem || e.dataTransfer.getData('text/plain');
                                                            if (word) {
                                                                const newAnswers = { ...currentAnswers };
                                                                Object.keys(newAnswers).forEach(key => {
                                                                    if (newAnswers[key] === word) delete newAnswers[key];
                                                                });
                                                                newAnswers[stmtIndex] = word;
                                                                handleAnswer(newAnswers);
                                                                setDraggedItem(null);
                                                            }
                                                        }}
                                                        className={`inline-flex items-center min-w-32 px-3 py-2 border-2 border-dashed rounded-lg transition-all ${
                                                            currentAnswers[stmtIndex]
                                                                ? 'border-green-500 bg-green-50'
                                                                : 'border-gray-300 bg-white hover:border-green-400'
                                                        }`}
                                                    >
                                                        {currentAnswers[stmtIndex] ? (
                                                            <span
                                                                draggable
                                                                onDragStart={(e) => handleDragStart(e, currentAnswers[stmtIndex])}
                                                                className="px-2 py-1 bg-green-500 text-white rounded font-semibold cursor-grab active:cursor-grabbing"
                                                            >
                                                                {currentAnswers[stmtIndex]}
                                                            </span>
                                                        ) : (
                                                            <span className="text-gray-400 text-sm italic">drop here</span>
                                                        )}
                                                    </div>
                                                    <span className="text-gray-800">{parts[1]}</span>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {currentQ.type === 'drag-drop' && (
                            <div className="mb-6">
                                <div className="mb-6">
                                    <p className="text-sm font-semibold text-gray-600 mb-3">üì¶ Drag these items:</p>
                                    <div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">
                                        {getAvailableItems().length === 0 ? (
                                            <p className="text-gray-400 text-sm italic w-full text-center">All items placed!</p>
                                        ) : (
                                            getAvailableItems().map((item) => (
                                                <div
                                                    key={item}
                                                    draggable
                                                    onDragStart={(e) => handleDragStart(e, item)}
                                                    className="px-4 py-2 bg-blue-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-blue-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105"
                                                >
                                                    {item}
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>
                                <div className="space-y-3">
                                    <p className="text-sm font-semibold text-gray-600 mb-3">üéØ Drop them in the correct category:</p>
                                    {currentQ.categories.map((category) => (
                                        <div
                                            key={category}
                                            onDragOver={handleDragOver}
                                            onDrop={(e) => handleDrop(e, category)}
                                            className={`p-4 border-2 border-dashed rounded-xl min-h-20 transition-all ${
                                                dropZones[category] 
                                                    ? 'border-blue-500 bg-blue-50' 
                                                    : 'border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50'
                                            }`}
                                        >
                                            <p className="font-semibold text-gray-700 mb-2">{category}</p>
                                            {dropZones[category] && (
                                                <div 
                                                    draggable
                                                    onDragStart={(e) => handleDragStart(e, dropZones[category])}
                                                    className="inline-block px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md cursor-grab active:cursor-grabbing hover:bg-blue-600"
                                                >
                                                    {dropZones[category]}
                                                </div>
                                            )}
                                            {!dropZones[category] && (
                                                <p className="text-gray-400 text-sm italic">Drop item here...</p>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {currentQ.type === 'drag-drop-images' && (
                            <div className="mb-6">
                                <div className="mb-6">
                                    <p className="text-sm font-semibold text-gray-600 mb-3">üì¶ Drag these devices:</p>
                                    <div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">
                                        {getAvailableItems().length === 0 ? (
                                            <p className="text-gray-400 text-sm italic w-full text-center">All devices placed!</p>
                                        ) : (
                                            getAvailableItems().map((item) => (
                                                <div
                                                    key={item.name}
                                                    draggable
                                                    onDragStart={(e) => handleDragStart(e, item.name)}
                                                    className="flex flex-col items-center px-4 py-3 bg-purple-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-purple-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105"
                                                >
                                                    <div className="text-3xl mb-1">{item.icon}</div>
                                                    <div className="text-sm font-semibold">{item.name}</div>
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    {currentQ.categories.map((category) => (
                                        <div
                                            key={category}
                                            onDragOver={handleDragOver}
                                            onDrop={(e) => handleDrop(e, category)}
                                            className="p-4 border-2 border-dashed rounded-xl min-h-40 transition-all border-gray-300 bg-gray-50 hover:border-purple-400 hover:bg-purple-50"
                                        >
                                            <p className="font-semibold text-gray-700 mb-3 text-center text-lg">{category}</p>
                                            <div className="flex flex-wrap gap-2 justify-center">
                                                {dropZones[category] && dropZones[category].map((itemName) => {
                                                    const item = currentQ.items.find(i => i.name === itemName);
                                                    return (
                                                        <div 
                                                            key={itemName}
                                                            draggable
                                                            onDragStart={(e) => handleDragStart(e, itemName)}
                                                            className="flex flex-col items-center px-3 py-2 bg-purple-500 text-white rounded-lg shadow-md cursor-grab active:cursor-grabbing hover:bg-purple-600 transition-all"
                                                        >
                                                            <div className="text-2xl mb-1">{item?.icon}</div>
                                                            <div className="text-xs font-semibold">{itemName}</div>
                                                        </div>
                                                    );
                                                })}
                                                {(!dropZones[category] || dropZones[category].length === 0) && (
                                                    <p className="text-gray-400 text-sm italic">Drop devices here...</p>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        <div className="flex gap-3">
                            {currentQuestion > 0 && (
                                <button
                                    onClick={handleBack}
                                    className="px-6 py-4 bg-gray-500 hover:bg-gray-600 text-white font-bold rounded-xl transition-all shadow-lg hover:scale-105 transform"
                                >
                                    ‚Üê Back
                                </button>
                            )}
                            <button
                                onClick={handleNext}
                                disabled={!isAnswered}
                                className={`flex-1 py-4 px-6 rounded-xl font-bold transition-all ${
                                    isAnswered
                                        ? 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:scale-105 transform'
                                        : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                }`}
                            >
                                {currentQuestion < questions.length - 1 ? 'Next ‚Üí' : 'Finish Quiz'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ICTQuiz />, document.getElementById('root'));
    </script>
</body>
</html> relative z-10 transform transition-all fade-in">
                            <div className="flex items-center justify-center mb-6">
                                <Monitor className="w-12 h-12 text-blue-600 mr-3"/>
                                <h1 className="text-4xl font-bold text-blue-600">ICT Quiz for 5th Grade</h1>
                            </div>
                            <p className="text-gray-700 text-center mb-6">
                                Welcome to your Information and Communication Technology quiz! This test will help you review what you've learned about different types of ICT tools, devices, and their uses.
                            </p>
                            <div className="bg-blue-50 rounded-lg p-6 mb-6">
                                <p className="text-lg font-semibold text-gray-800 mb-3">üìã Instructions:</p>
                                <ul className="space-y-2 text-gray-700">
                                    <li>‚Ä¢ There are 5 questions in total.</li>
                                    <li>‚Ä¢ Some questions have multiple parts.</li>
                                    <li>‚Ä¢ The total score is 20 points.</li>
                                    <li>‚Ä¢ Take your time and read each question carefully.</li>
                                </ul>
                            </div>
                            <div className="mb-6 relative" ref={inputRef}>
                                <label className="block text-gray-700 font-semibold mb-2">Enter Your Name:</label>
                                <input
                                    type="text"
                                    value={studentName}
                                    onChange={(e) => {
                                        setStudentName(e.target.value);
                                        setShowNameError(false);
                                        setShowSuggestions(true);
                                    }}
                                    onFocus={() => setShowSuggestions(true)}
                                    placeholder="Start typing your name..."
                                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"
                                />
                                {showSuggestions && studentName && filteredStudents.length > 0 && (
                                    <div className="absolute w-full mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10">
                                        {filteredStudents.map((name) => (
                                            <button
                                                key={name}
                                                onClick={() => {
                                                    setStudentName(name);
                                                    setShowSuggestions(false);
                                                }}
                                                disabled={completedStudents[name]}
                                                className={`w-full text-left p-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0 ${
                                                    completedStudents[name] ? 'opacity-50 cursor-not-allowed' : ''
                                                }`}
                                            >
                                                {name}
                                                {completedStudents[name] && (
                                                    <span className="text-xs text-gray-500 ml-2">(Completed)</span>
                                                )}
                                            </button>
                                        ))}
                                    </div>
                                )}
                                {showNameError && (
                                    <p className="text-red-500 text-sm mt-2">Please select your name from the list.</p>
                                )}
                            </div>
                            <button
                                onClick={handleStartQuiz}
                                className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition-colors shadow-lg"
                            >
                                Start Quiz
                            </button>
                            <p className="text-sm text-gray-600 text-center mt-4">
                                ‚ö†Ô∏è The quiz will enter fullscreen mode. Please stay on this tab until you finish.
                            </p>
                        </div>
                    </div>
                );
            }

            if (isCompleted) {
                const points = calculatePoints();
                const totalPoints = 20;
                const grade = getGradeFromScore(points);
                const percentage = Math.round((points / totalPoints) * 100);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-500 flex items-center justify-center p-4">
                        <AnimatedBackground/>
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full
