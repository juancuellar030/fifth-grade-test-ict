<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICT Quiz for 5th Grade</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const Monitor = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" strokeWidth="2"/>
                <line x1="8" y1="21" x2="16" y2="21" strokeWidth="2"/>
                <line x1="12" y1="17" x2="12" y2="21" strokeWidth="2"/>
            </svg>
        );

        const AlertCircle = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                <line x1="12" y1="8" x2="12" y2="12" strokeWidth="2"/>
                <line x1="12" y1="16" x2="12.01" y2="16" strokeWidth="2"/>
            </svg>
        );

        const ICTQuiz = () => {
            const [studentName, setStudentName] = useState('');
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [hasStarted, setHasStarted] = useState(false);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [isCompleted, setIsCompleted] = useState(false);
            const [completedStudents, setCompletedStudents] = useState({});
            const [showNameError, setShowNameError] = useState(false);
            const [questionTransition, setQuestionTransition] = useState('enter');
            const [draggedItem, setDraggedItem] = useState(null);
            const [dropZones, setDropZones] = useState({});
            const [startTime, setStartTime] = useState(null);
            const [fullscreenExitCount, setFullscreenExitCount] = useState(0);
            const [dataSubmitted, setDataSubmitted] = useState(false);
            const [showWarning, setShowWarning] = useState(false);
            const inputRef = useRef(null);

            const studentList = [
                "Isabella Arce Rodriguez", "Valentina Arias Guevara", "Maria Paz Bermeo Montealegre", "Zoe Lylen Castañeda Romero", "Gabriel Esteban Cuellar Salas", "Dilan Camilo Cumaco Pastrana", "Martín Fernández Lucuara", "Derek Santiago Fierro Lopez", "Simón Gonzalez Chavarro", "Gerónimo Jimenez Bocanegra", "Samuel José Majé Marroquín", "Martín Medina Ortiz", "Karen Sofia Mosquera Baylon", "María Del Mar Mosquera Garzón", "Santiago Motta Santofimio", "Ana Lucia Murcia Guebely", "Antonella Murcia Oliveros", "Emmanuel Murcia Trujillo", "Luciana Quesada Parra", "Maria Paz Quesada Rodriguez", "Miguel Ángel Ruiz Varon", "Luzyana Suarez Solorzano", "Santiago Tobón Castro", "Sarita Vargas Carvajal", "Luciana Sofia Vargas Sanchez", "Julieta Alarcon Cabrera", "Emmanuel Barrero Sandoval", "Catalina Barreto Rivera", "Khalid Bedoya Sanabria", "Daniela Beron Farfan", "Ana Lucia Buendía Losada", "Jacobo Carvajal Jimenez", "Juliana Margarita Castrillon Ramos", "Isabel Cristina Cuellar Romero", "Emiliano Diaz Rojas", "Gabriela Echeverry Trujillo", "Sara Isabella Gaitan Arango", "Fabio Hernandez Galindo", "Juanita Milagros Lopez Alarcon", "Karla Medina Cuenca", "Maria Paz Mora Caicedo", "Emiliano Ortiz Ortiz", "Pablo Alejandro Oviedo Barrero", "Maria Lucia Perdomo Ramirez", "Zamuhel Ramirez Castro", "Sara Juliana Riscanevo Lopera", "Maria Fernanda Rojas Castro", "Santiago Trujillo Gonzalez", "Juan Diego Valderrama Rodriguez", "Sarah Michelle Audor Gutierrez", "Santiago Chavarro Fernández", "Taliana Andrea Chavarro Sanabria", "Ariadna Estupiñan Borrero", "Martin Eduardo Fierro Cordoba", "Danna Gabriela Giraldo Leiva", "Juan Ricardo Guevara Calderon", "Salomon Hoyos Castillo", "Jhoan Sebastian Lozano Moscoso", "Sebastian Martinez Dussan", "Sofia Mayorca Gonzalez", "Samantha Medina Figueroa", "Maria Lucia Melo Camacho", "Sara Luciana Obregon Agudelo", "Sara Orozco Escobar", "Santiago Osorio Benavides", "Angie Luciana Perez Trujillo", "Santiago Polania Perdomo", "Felipe Ramos Vargas", "Jorge Mario Rojas Alvarez", "Sofia Salazar Castañeda", "Hernán Gabriel Sierra Suarez", "Maria Victoria Vidal Prieto", "Juan Andres Vieda Diaz", "Juan Diego Albarracín Martínez", "Emiliano Andrade Perez", "Moises Burgos Arevalo", "Jeronimo Calderón Morales", "Martín Caquimbo De Castro", "Salome Castro Hurtado", "Ashly Dayanna Cumaco Alonso", "Dylan Santiago Gomez Reyes", "Salome Gutierrez Acosta", "Jesus Manuel Gutierrez Vargas", "Isabela Huepe Quintero", "Juan Esteban Madrid Guevara", "Jeronimo Mora Araujo", "Silvana Moreno Pastrana", "Luciana Niño Rojas", "Emmanuel José Ortiz Urrego", "Sara Sofia Oviedo Cajiao", "Daniel Leonardo Perdomo Ochoa", "Juan Matias Rodriguez Calderon", "Maria Jose Rojas Castro", "Gabriela Sarmiento-Perez Trujillo", "Juan Felipe Tamayo Castañeda", "Luciana Andrea Tellez Aviles", "Hanna Isabella Valenzuela Paredes"
            ];

            const questions = [
                { id: 1, type: 'multiple-choice-group', question: 'Answer each question by selecting the correct option:', questions: [{ text: 'What does ICT help us do?', options: ['Share and find information', 'Paint pictures', 'Ride bicycles', 'Cook food'], correct: 0 }, { text: 'What do we call programs that help us play games or do homework on a computer?', options: ['Hardware', 'Software', 'Network', 'Input'], correct: 1 }, { text: 'What is input in ICT?', options: ['Sending information to a device, like typing on a keyboard', 'The computer thinking', 'The screen showing information', 'Printing a paper'], correct: 0 }] },
                { id: 2, type: 'drag-drop', question: 'Drag each item to the correct category:', items: ['Headphones', 'Google Chrome', 'Wi-Fi', 'Tablet'], categories: ['Hardware', 'Software', 'Network', 'Processing Device'], correctAnswers: { 'Hardware': 'Headphones', 'Software': 'Google Chrome', 'Network': 'Wi-Fi', 'Processing Device': 'Tablet' } },
                { id: 3, type: 'drag-drop-images', question: 'Drag each device to the correct group:', items: [{ name: 'Keyboard', icon: '⌨️' }, { name: 'Monitor', icon: '🖥️' }, { name: 'Mouse', icon: '🖱️' }, { name: 'Printer', icon: '🖨️' }, { name: 'Microphone', icon: '🎤' }, { name: 'Speaker', icon: '🔊' }], categories: ['Input Devices', 'Output Devices'], correctAnswers: { 'Input Devices': ['Keyboard', 'Mouse', 'Microphone'], 'Output Devices': ['Monitor', 'Printer', 'Speaker'] } },
                { id: 4, type: 'true-false-group', question: 'Read each statement and select True or False:', statements: [{ text: 'Software is something you can physically touch.', correct: 1 }, { text: 'Smartphones and tablets are examples of ICT devices.', correct: 0 }, { text: 'Sending emails is an example of using ICT in daily life.', correct: 0 }] },
                { id: 5, type: 'fill-group', question: 'Drag the correct word from the box to fill in each blank:', wordBank: ['networks', 'internet', 'software', 'processing', 'communication'], statements: [{ text: 'Bluetooth and Wi-Fi are examples of wireless _______.', answer: 'networks' }, { text: 'The _______ connects multiple devices to share information.', answer: 'internet' }, { text: 'Programs and apps are examples of _______.', answer: 'software' }, { text: 'When a computer thinks and works on information, this is called _______.', answer: 'processing' }] }
            ];
            
            const gradingScale = { 0: 2.0, 1: 2.2, 2: 2.3, 3: 2.5, 4: 2.7, 5: 2.8, 6: 3.0, 7: 3.2, 8: 3.3, 9: 3.5, 10: 3.6, 11: 3.8, 12: 3.9, 13: 4.0, 14: 4.2, 15: 4.3, 16: 4.5, 17: 4.6, 18: 4.7, 19: 4.9, 20: 5.0 };

            const calculatePoints = () => { let points = 0; questions.forEach((q, index) => { const userAnswers = answers[index] || {}; if (q.type === 'multiple-choice-group') q.questions.forEach((subQ, qIndex) => { if (userAnswers[qIndex] === subQ.correct) points++; }); else if (q.type === 'drag-drop') Object.keys(q.correctAnswers).forEach(category => { if (userAnswers[category] === q.correctAnswers[category]) points++; }); else if (q.type === 'drag-drop-images') { q.items.forEach(item => { const correctCat = Object.keys(q.correctAnswers).find(cat => q.correctAnswers[cat].includes(item.name)); const userCat = Object.keys(userAnswers).find(cat => (userAnswers[cat] || []).includes(item.name)); if (correctCat === userCat) points++; }); } else if (q.type === 'true-false-group') q.statements.forEach((stmt, stmtIndex) => { if (userAnswers[stmtIndex] === stmt.correct) points++; }); else if (q.type === 'fill-group') q.statements.forEach((stmt, stmtIndex) => { if (userAnswers[stmtIndex]?.toLowerCase().trim() === stmt.answer.toLowerCase()) points++; }); }); return points; };
            const getGradeFromScore = (score) => gradingScale[score] !== undefined ? gradingScale[score] : 2.0;
            const filteredStudents = studentList.filter(name => name.toLowerCase().includes(studentName.toLowerCase()));

            const submitResultsToGoogleSheet = async (data) => {
                const webAppUrl = 'https://script.google.com/macros/s/AKfycbxBpLDS4AzwLJVh1IF_xdtSeBp7CCkUQxLp9bNy8qJlOKu9np0S7fdcov7GLZVWiRd4/exec';
                try { await fetch(webAppUrl, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) }); console.log('Data sent'); } catch (error) { console.error('Error sending data:', error); }
            };

            useEffect(() => {
                if (isCompleted && !dataSubmitted) {
                    const points = calculatePoints();
                    const grade = getGradeFromScore(points);
                    const endTime = new Date().toISOString();
                    const results = { studentName, startTime, endTime, score: points, grade, fullscreenExits: fullscreenExitCount };
                    submitResultsToGoogleSheet(results);
                    setDataSubmitted(true);
                }
            }, [isCompleted, dataSubmitted, answers]);

            useEffect(() => {
                const handleFullscreenChange = () => { if (!document.fullscreenElement && hasStarted && !isCompleted) { setShowWarning(true); setFullscreenExitCount(prev => prev + 1); }};
                const handleVisibilityChange = () => { if (document.hidden && hasStarted && !isCompleted) { setShowWarning(true); setFullscreenExitCount(prev => prev + 1); }};
                document.addEventListener('fullscreenchange', handleFullscreenChange);
                document.addEventListener('visibilitychange', handleVisibilityChange);
                return () => { document.removeEventListener('fullscreenchange', handleFullscreenChange); document.removeEventListener('visibilitychange', handleVisibilityChange); };
            }, [hasStarted, isCompleted]);
            
            useEffect(() => { const currentQ = questions[currentQuestion]; if (currentQ && currentQ.type.includes('drag-drop')) { setDropZones(answers[currentQuestion] || {}); } }, [currentQuestion, answers]);
            useEffect(() => { const handleClickOutside = (e) => { if (inputRef.current && !inputRef.current.contains(e.target)) setShowSuggestions(false); }; document.addEventListener('mousedown', handleClickOutside); return () => document.removeEventListener('mousedown', handleClickOutside); }, []);

            const enterFullscreen = () => { if (document.documentElement.requestFullscreen) document.documentElement.requestFullscreen().then(() => setShowWarning(false)); };

            const handleStartQuiz = () => {
                if (!studentName.trim() || !studentList.includes(studentName)) { setShowNameError(true); return; }
                if (completedStudents[studentName]) { alert('You have already completed this quiz!'); return; }
                setStartTime(new Date().toISOString());
                setHasStarted(true);
                enterFullscreen();
            };
            
            const handleAnswer = (answer) => setAnswers({ ...answers, [currentQuestion]: answer });
            const handleDragStart = (e, item) => { setDraggedItem(item); e.dataTransfer.setData('text/plain', item); };
            const handleDragOver = (e) => e.preventDefault();
            const handleDrop = (e, category) => { e.preventDefault(); const item = draggedItem || e.dataTransfer.getData('text/plain'); if (item) { let newAnswers = { ...(answers[currentQuestion] || {}) }; Object.keys(newAnswers).forEach(key => { if (Array.isArray(newAnswers[key])) newAnswers[key] = newAnswers[key].filter(i => i !== item); else if (newAnswers[key] === item) delete newAnswers[key]; }); if (questions[currentQuestion].type === 'drag-drop-images') { if (!newAnswers[category]) newAnswers[category] = []; if (!newAnswers[category].includes(item)) newAnswers[category].push(item); } else { newAnswers[category] = item; } setAnswers({ ...answers, [currentQuestion]: newAnswers }); setDropZones(newAnswers); setDraggedItem(null); } };
            const getAvailableItems = () => { const currentQ = questions[currentQuestion]; const currentAnswers = answers[currentQuestion] || {}; if (currentQ.type.includes('drag-drop')) { const placedItems = Object.values(currentAnswers).flat(); return currentQ.items.filter(item => !placedItems.includes(item.name || item)); } if (currentQ.type === 'fill-group') return currentQ.wordBank.filter(word => !Object.values(currentAnswers).includes(word)); return []; };
            const handleNext = () => { setQuestionTransition('exit'); setTimeout(() => { if (currentQuestion < questions.length - 1) { setCurrentQuestion(prev => prev + 1); setQuestionTransition('enter'); } else { setIsCompleted(true); setCompletedStudents({ ...completedStudents, [studentName]: true }); if (document.exitFullscreen) document.exitFullscreen(); } }, 300); };
            const handleBack = () => { if (currentQuestion > 0) { setQuestionTransition('exit'); setTimeout(() => setCurrentQuestion(prev => prev - 1), 300); }};

            const AnimatedBackground = () => {
                const svgIcons = [
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.3911 16.3358C21.4356 16.3818 21.4579 16.4048 21.4787 16.4276C21.7998 16.7802 21.9843 17.2358 21.999 17.7124C22 17.7433 22 17.7753 22 17.8393C22 17.9885 22 18.0631 21.996 18.1261C21.9325 19.1314 21.1314 19.9325 20.1261 19.996C20.0631 20 19.9885 20 19.8393 20H4.16068C4.01148 20 3.93688 20 3.87388 19.996C2.86865 19.9325 2.06749 19.1314 2.00398 18.1261C2 18.0631 2 17.9885 2 17.8393C2 17.7753 2 17.7433 2.00096 17.7124C2.01569 17.2358 2.20022 16.7802 2.52127 16.4276C2.54208 16.4048 2.56433 16.3818 2.60883 16.3359L3.90311 15H20.0969L21.3911 16.3358ZM8.75 18C8.75 17.5858 9.08579 17.25 9.5 17.25H14.5C14.9142 17.25 15.25 17.5858 15.25 18C15.25 18.4142 14.9142 18.75 14.5 18.75H9.5C9.08579 18.75 8.75 18.4142 8.75 18Z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M4.35294 7C4.35294 5.11438 4.35294 4.17157 4.93873 3.58579C5.52451 3 6.46732 3 8.35294 3H15.6471C17.5327 3 18.4755 3 19.0613 3.58579C19.6471 4.17157 19.6471 5.11438 19.6471 7V14H4.35294V7ZM12 6.5C12.4142 6.5 12.75 6.16421 12.75 5.75C12.75 5.33579 12.4142 5 12 5C11.5858 5 11.25 5.33579 11.25 5.75C11.25 6.16421 11.5858 6.5 12 6.5Z" fill="currentColor"/></svg>', 
                        color: '#93c5fd', animation: 'float-1', position: 'top-20 left-10', size: 'w-36 h-36' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="none" stroke="currentColor" stroke-width="1.5"/><rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M9 9h6v6H9z" fill="currentColor" opacity="0.3"/></svg>', 
                        color: '#c4b5fd', animation: 'float-2', position: 'top-40 right-20', size: 'w-14 h-14' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><rect x="5" y="2" width="14" height="20" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="9" y1="18" x2="15" y2="18" stroke="currentColor" stroke-width="1.5"/><rect x="7" y="5" width="10" height="10" fill="currentColor" opacity="0.2"/></svg>', 
                        color: '#fbcfe8', animation: 'float-3', position: 'bottom-32 left-1/4', size: 'w-12 h-12' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zM11 8h2v2h-2V8zm0 3h2v2h-2v-2z" fill="none" stroke="currentColor" stroke-width="1.5"/><rect x="4" y="6" width="16" height="3" fill="currentColor" opacity="0.2"/></svg>', 
                        color: '#a5b4fc', animation: 'float-1', position: 'top-1/3 right-1/4', size: 'w-14 h-14' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4zm7-13.93C7.05 1.56 4 4.92 4 9h7V1.07z" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="3" fill="currentColor" opacity="0.3"/></svg>', 
                        color: '#67e8f9', animation: 'float-2', position: 'bottom-20 right-32', size: 'w-16 h-16' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 1a9 9 0 0 0-9 9v7c0 1.66 1.34 3 3 3h3v-8H5v-2c0-3.87 3.13-7 7-7s7 3.13 7 7v2h-4v8h3c1.66 0 3-1.34 3-3v-7a9 9 0 0 0-9-9z" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="7" cy="14" r="1.5" fill="currentColor"/><circle cx="17" cy="14" r="1.5" fill="currentColor"/></svg>', 
                        color: '#86efac', animation: 'float-3', position: 'top-1/2 left-16', size: 'w-14 h-14' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="2" fill="currentColor" opacity="0.3"/></svg>', 
                        color: '#fcd34d', animation: 'float-1', position: 'top-3/4 right-1/3', size: 'w-12 h-12' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M7 9l5-5v16l-5-5H3V9h4z" fill="currentColor" opacity="0.2"/></svg>', 
                        color: '#fca5a5', animation: 'float-2', position: 'bottom-1/3 left-1/3', size: 'w-14 h-14' 
                    },
                    { 
                        svg: '<svg viewBox="0 0 24 24" fill="currentColor"><rect x="3" y="6" width="18" height="12" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M7 10h10M7 14h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="16" cy="14" r="1" fill="currentColor"/></svg>', 
                        color: '#d8b4fe', animation: 'float-3', position: 'top-2/3 left-20', size: 'w-16 h-16' 
                    }
                ];
                
                return (
                    <div className="fixed inset-0 overflow-hidden pointer-events-none">
                        <style>{`
                            @keyframes float1{0%,100%{transform:translate(0,0) rotate(0deg)}33%{transform:translate(50px,-40px) rotate(15deg)}66%{transform:translate(-30px,30px) rotate(-15deg)}}
                            @keyframes float2{0%,100%{transform:translate(0,0) rotate(0deg)}33%{transform:translate(-60px,50px) rotate(-20deg)}66%{transform:translate(40px,-25px) rotate(20deg)}}
                            @keyframes float3{0%,100%{transform:translate(0,0) scale(1) rotate(0deg)}50%{transform:translate(25px,35px) scale(1.15) rotate(10deg)}}
                            @keyframes slideInRight{from{opacity:0;transform:translateX(100px)}to{opacity:1;transform:translateX(0)}}
                            @keyframes slideOutLeft{from{opacity:1;transform:translateX(0)}to{opacity:0;transform:translateX(-100px)}}
                            @keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
                            @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
                            @keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-10px)}20%,40%,60%,80%{transform:translateX(10px)}}
                            .float-1{animation:float1 25s infinite ease-in-out}
                            .float-2{animation:float2 30s infinite ease-in-out}
                            .float-3{animation:float3 20s infinite ease-in-out}
                            .slide-in{animation:slideInRight .4s ease-out}
                            .slide-out{animation:slideOutLeft .3s ease-in}
                            .fade-in{animation:fadeIn .3s ease-out}
                            .pulse{animation:pulse 2s infinite}
                            .shake{animation:shake .5s}
                        `}</style>
                        {svgIcons.map((item, index) => (
                            <div 
                                key={index} 
                                className={`absolute ${item.position} opacity-15 ${item.animation} ${item.size}`}
                                style={{ color: item.color }}
                                dangerouslySetInnerHTML={{ __html: item.svg }}
                            />
                        ))}
                    </div>
                );
            };
            
            if (!hasStarted && !isCompleted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                        <AnimatedBackground/>
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative z-10 transform transition-all fade-in">
                            <div className="flex items-center justify-center mb-6"><Monitor className="w-12 h-12 text-blue-600 mr-3"/><h1 className="text-4xl font-bold text-blue-600">ICT Quiz - 5th Grade</h1></div>
                            <p className="text-gray-700 text-center mb-6">Welcome to your Technology quiz!</p>
                            <div className="bg-blue-50 rounded-lg p-6 mb-6"><p className="text-lg font-semibold text-gray-800 mb-3">📋 Instructions:</p><ul className="space-y-2 text-gray-700"><li>• There are 5 questions in total.</li><li>• The total score is 20 points.</li><li>• Read each question carefully.</li></ul></div>
                            <div className="mb-6 relative" ref={inputRef}>
                                <label className="block text-gray-700 font-semibold mb-2">Enter Your Name:</label>
                                <input type="text" value={studentName} onChange={(e) => { setStudentName(e.target.value); setShowNameError(false); setShowSuggestions(true); }} onFocus={() => setShowSuggestions(true)} placeholder="Start typing your name..." className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"/>
                                {showSuggestions && studentName && filteredStudents.length > 0 && (
                                    <div className="absolute w-full mt-1 bg-white border-2 border-gray-300 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10">{filteredStudents.map((name) => (<button key={name} onClick={() => { setStudentName(name); setShowSuggestions(false); }} disabled={completedStudents[name]} className={`w-full text-left p-3 hover:bg-blue-50 transition-colors border-b border-gray-100 last:border-b-0 ${completedStudents[name] ? 'opacity-50 cursor-not-allowed' : ''}`}>{name}{completedStudents[name] && (<span className="text-xs text-gray-500 ml-2">(Completed)</span>)}</button>))}</div>
                                )}
                                {showNameError && (<p className="text-red-500 text-sm mt-2">Please select your name from the list.</p>)}
                            </div>
                            <button onClick={handleStartQuiz} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition-colors shadow-lg">Start Quiz</button>
                            <p className="text-sm text-gray-600 text-center mt-4">⚠️ The quiz will enter fullscreen mode. Please stay on this tab.</p>
                        </div>
                    </div>
                );
            }

            if (isCompleted) {
                const points = calculatePoints();
                const totalPoints = 20;
                const grade = getGradeFromScore(points);
                const percentage = Math.round((points / totalPoints) * 100);
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-500 flex items-center justify-center p-4">
                        <AnimatedBackground/>
                        <div className="bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative z-10 fade-in">
                            <div className="text-center"><div className="text-6xl mb-4">🎉</div><h2 className="text-4xl font-bold text-gray-800 mb-4">Quiz Completed!</h2><p className="text-xl text-gray-700 mb-2">Great job, {studentName}!</p><div className="bg-blue-50 rounded-lg p-6 my-6 text-center"><p className="text-2xl font-bold text-blue-600 mb-2">Your Score: {points} / {totalPoints}</p><p className="text-3xl font-bold text-green-600 mb-3">Your Grade: {grade.toFixed(1)}</p><p className="text-xl text-gray-700">{percentage}%</p></div><div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6"><p className="text-gray-700">{percentage >= 80 ? '🌟 Excellent work!' : percentage >= 60 ? '👍 Good job!' : '💪 Keep studying!'}</p></div><p className="text-gray-600">Thank you for taking the ICT quiz. You cannot retake it.</p></div>
                        </div>
                    </div>
                );
            }

            const currentQ = questions[currentQuestion];
            const isAnswered = (() => { const currentAnswers = answers[currentQuestion] || {}; if (currentQ.type.includes('group')) return Object.keys(currentAnswers).length === (currentQ.questions || currentQ.statements).length; if (currentQ.type === 'drag-drop-images') return Object.values(currentAnswers).flat().length === currentQ.items.length; if (currentQ.type === 'drag-drop') return Object.keys(currentAnswers).length === currentQ.categories.length; return currentAnswers !== undefined; })();

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 flex items-center justify-center p-4">
                    <AnimatedBackground />
                    {showWarning && (
                        <div className="fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 text-center fade-in shake">
                                <div className="mb-6"><div className="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 pulse"><AlertCircle className="w-12 h-12 text-red-600" /></div><h2 className="text-3xl font-bold text-gray-800 mb-3">⚠️ Warning!</h2><p className="text-lg text-gray-700 mb-2">You have exited fullscreen mode or switched tabs.</p><p className="text-md text-gray-600">Please return to fullscreen mode to continue.</p></div>
                                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 text-left"><p className="text-sm text-gray-700"><strong>Remember:</strong> You must stay in fullscreen during the entire quiz.</p></div>
                                <button onClick={enterFullscreen} className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-lg hover:scale-105 transform">Return to Fullscreen</button>
                            </div>
                        </div>
                    )}
                    <div className={`bg-white rounded-3xl shadow-2xl p-8 max-w-2xl w-full relative z-10 ${questionTransition === 'enter' ? 'slide-in' : 'slide-out'} ${showWarning ? 'blur-sm' : ''}`}>
                        <div className="mb-6">
                            <div className="flex justify-between items-center mb-4"><span className="text-sm font-semibold text-gray-500">Question {currentQuestion + 1} of {questions.length}</span><span className="text-sm font-semibold text-blue-600">{studentName}</span></div>
                            <div className="w-full bg-gray-200 rounded-full h-2"><div className="bg-blue-600 h-2 rounded-full transition-all duration-500" style={{ width: `${((currentQuestion + 1) / questions.length) * 100}%` }}></div></div>
                        </div>
                        <h2 className="text-2xl font-bold text-gray-800 mb-6">{currentQ.question}</h2>


                        {currentQ.type === 'multiple-choice-group' && (<div className="mb-6 space-y-4">{currentQ.questions.map((q, qIndex) => (<div key={qIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200"><p className="text-gray-800 font-medium mb-3">{qIndex + 1}. {q.text}</p><div className="space-y-2">{q.options.map((option, optIndex) => (<button key={optIndex} onClick={() => { const newAnswers = { ...(answers[currentQuestion] || {}), [qIndex]: optIndex }; handleAnswer(newAnswers); }} className={`w-full p-3 text-left rounded-lg border-2 transition-all ${ (answers[currentQuestion] || {})[qIndex] === optIndex ? 'border-blue-600 bg-blue-50 font-semibold transform scale-105' : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100' }`}>{option}</button>))}</div></div>))}</div>)}
                        {currentQ.type === 'true-false-group' && (<div className="mb-6 space-y-4">{currentQ.statements.map((statement, stmtIndex) => (<div key={stmtIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200"><p className="text-gray-800 font-medium mb-3">{stmtIndex + 1}. {statement.text}</p><div className="flex gap-3"><button onClick={() => { const newAnswers = { ...(answers[currentQuestion] || {}), [stmtIndex]: 0 }; handleAnswer(newAnswers); }} className={`flex-1 p-3 rounded-lg border-2 transition-all ${ (answers[currentQuestion] || {})[stmtIndex] === 0 ? 'border-blue-600 bg-blue-50 font-semibold' : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100' }`}>True</button><button onClick={() => { const newAnswers = { ...(answers[currentQuestion] || {}), [stmtIndex]: 1 }; handleAnswer(newAnswers); }} className={`flex-1 p-3 rounded-lg border-2 transition-all ${ (answers[currentQuestion] || {})[stmtIndex] === 1 ? 'border-blue-600 bg-blue-50 font-semibold' : 'border-gray-300 hover:border-blue-400 hover:bg-gray-100' }`}>False</button></div></div>))}</div>)}
                        {currentQ.type === 'fill-group' && (<div className="mb-6"><div className="mb-6"><p className="text-sm font-semibold text-gray-600 mb-3">📦 Word Bank - Drag words to fill the blanks:</p><div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">{getAvailableItems().length === 0 ? (<p className="text-gray-400 text-sm italic w-full text-center">All words used!</p>) : (getAvailableItems().map((word) => (<div key={word} draggable onDragStart={(e) => handleDragStart(e, word)} className="px-4 py-2 bg-green-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-green-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105 font-semibold">{word}</div>)))}</div></div><div className="space-y-4">{currentQ.statements.map((statement, stmtIndex) => (<div key={stmtIndex} className="p-4 bg-gray-50 rounded-xl border-2 border-gray-200"><div className="flex items-center flex-wrap gap-2"><span className="font-semibold text-gray-700">{stmtIndex + 1}.</span><span className="text-gray-800">{statement.text.split('_______')[0]}</span><div onDragOver={handleDragOver} onDrop={(e) => { e.preventDefault(); const word = draggedItem || e.dataTransfer.getData('text/plain'); if (word) { const newAnswers = { ...(answers[currentQuestion] || {}) }; Object.keys(newAnswers).forEach(key => { if (newAnswers[key] === word) delete newAnswers[key]; }); newAnswers[stmtIndex] = word; handleAnswer(newAnswers); setDraggedItem(null); } }} className={`inline-flex items-center justify-center min-w-32 min-h-10 px-3 py-2 border-2 border-dashed rounded-lg transition-all ${ (answers[currentQuestion] || {})[stmtIndex] ? 'border-green-500 bg-green-50' : 'border-gray-300 bg-white hover:border-green-400' }`}>{(answers[currentQuestion] || {})[stmtIndex] ? (<span draggable onDragStart={(e) => handleDragStart(e, (answers[currentQuestion] || {})[stmtIndex])} className="px-2 py-1 bg-green-500 text-white rounded font-semibold cursor-grab active:cursor-grabbing">{(answers[currentQuestion] || {})[stmtIndex]}</span>) : (<span className="text-gray-400 text-sm italic">drop here</span>)}</div><span className="text-gray-800">{statement.text.split('_______')[1]}</span></div></div>))}</div></div>)}
                        {currentQ.type === 'drag-drop' && (<div className="mb-6"><div className="mb-6"><p className="text-sm font-semibold text-gray-600 mb-3">📦 Drag these items:</p><div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">{getAvailableItems().length === 0 ? (<p className="text-gray-400 text-sm italic w-full text-center">All items placed!</p>) : (getAvailableItems().map((item) => (<div key={item} draggable onDragStart={(e) => handleDragStart(e, item)} className="px-4 py-2 bg-blue-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-blue-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105">{item}</div>)))}</div></div><div className="space-y-3"><p className="text-sm font-semibold text-gray-600 mb-3">🎯 Drop them in the correct category:</p>{currentQ.categories.map((category) => (<div key={category} onDragOver={handleDragOver} onDrop={(e) => handleDrop(e, category)} className={`p-4 border-2 border-dashed rounded-xl min-h-20 transition-all ${ (dropZones)[category] ? 'border-blue-500 bg-blue-50' : 'border-gray-300 bg-gray-50 hover:border-blue-400 hover:bg-blue-50' }`}><p className="font-semibold text-gray-700 mb-2">{category}</p>{(dropZones)[category] && (<div draggable onDragStart={(e) => handleDragStart(e, (dropZones)[category])} className="inline-block px-4 py-2 bg-blue-500 text-white rounded-lg shadow-md cursor-grab active:cursor-grabbing hover:bg-blue-600">{(dropZones)[category]}</div>)}{!(dropZones)[category] && (<p className="text-gray-400 text-sm italic">Drop item here...</p>)}</div>))}</div></div>)}
                        {currentQ.type === 'drag-drop-images' && (<div className="mb-6"><div className="mb-6"><p className="text-sm font-semibold text-gray-600 mb-3">📦 Drag these devices:</p><div className="flex flex-wrap gap-3 p-4 bg-gray-50 rounded-xl border-2 border-gray-200 min-h-16">{getAvailableItems().length === 0 ? (<p className="text-gray-400 text-sm italic w-full text-center">All devices placed!</p>) : (getAvailableItems().map((item) => (<div key={item.name} draggable onDragStart={(e) => handleDragStart(e, item.name)} className="flex flex-col items-center px-4 py-3 bg-purple-500 text-white rounded-lg cursor-grab active:cursor-grabbing hover:bg-purple-600 transition-all shadow-md hover:shadow-lg transform hover:scale-105"><div className="text-3xl mb-1">{item.icon}</div><div className="text-sm font-semibold">{item.name}</div></div>)))}</div></div><div className="grid grid-cols-1 md:grid-cols-2 gap-4">{currentQ.categories.map((category) => (<div key={category} onDragOver={handleDragOver} onDrop={(e) => handleDrop(e, category)} className="p-4 border-2 border-dashed rounded-xl min-h-40 transition-all border-gray-300 bg-gray-50 hover:border-purple-400 hover:bg-purple-50"><p className="font-semibold text-gray-700 mb-3 text-center text-lg">{category}</p><div className="flex flex-wrap gap-2 justify-center">{dropZones[category] && dropZones[category].map((itemName) => { const item = currentQ.items.find(i => i.name === itemName); return (<div key={itemName} draggable onDragStart={(e) => handleDragStart(e, itemName)} className="flex flex-col items-center px-3 py-2 bg-purple-500 text-white rounded-lg shadow-md cursor-grab active:cursor-grabbing hover:bg-purple-600 transition-all"><div className="text-2xl mb-1">{item?.icon}</div><div className="text-xs font-semibold">{itemName}</div></div>); })}{(!dropZones[category] || dropZones[category].length === 0) && (<p className="text-gray-400 text-sm italic">Drop devices here...</p>)}</div></div>))}</div></div>)}
                        
                        <div className="flex gap-3 mt-8">
                            {currentQuestion > 0 && (<button onClick={handleBack} className="px-6 py-4 bg-gray-500 hover:bg-gray-600 text-white font-bold rounded-xl transition-all shadow-lg hover:scale-105 transform">← Back</button>)}
                            <button onClick={handleNext} disabled={!isAnswered} className={`flex-1 py-4 px-6 rounded-xl font-bold transition-all ${isAnswered ? 'bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:scale-105 transform' : 'bg-gray-300 text-gray-500 cursor-not-allowed'}`}>{currentQuestion < questions.length - 1 ? 'Next →' : 'Finish Quiz'}</button>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<ICTQuiz />, document.getElementById('root'));
    </script>
</body>
</html>
